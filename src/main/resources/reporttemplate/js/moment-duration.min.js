!function(e,t){function n(e){var t="";if(!(e=parseInt(e,10))||e<1)return t;for(;e;)t+="0",e-=1;return t}function r(e,t,r){return null==e&&(e=""),e=""+e,(r?e:"")+n(t-e.length)+(r?"":e)}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e,t){for(var n=e.length;n-=1;)if(t(e[n]))return e[n]}function s(e,t){var n,r=0,i=e.length;for("function"!=typeof t&&(n=t,t=function(e){return e===n});r<i;){if(t(e[r]))return e[r];r+=1}}function a(e,t){var n=0,r=e.length;if(e&&r)for(;n<r;){if(!1===t(e[n],n))return;n+=1}}function c(e,t){var n=0,r=e.length,i=[];if(!e||!r)return i;for(;n<r;)i[n]=t(e[n],n),n+=1;return i}function f(e,t){return c(e,function(e){return e[t]})}function l(e){var t=[];return a(e,function(e){e&&t.push(e)}),t}function p(e){var t=[];return a(e,function(e){s(t,e)||t.push(e)}),t}function h(e,t){var n=[];return a(e,function(e){a(t,function(t){e===t&&n.push(e)})}),p(n)}function m(e,t){var n=[];return a(e,function(r,i){if(!t(r))return n=e.slice(i),!1}),n}function y(e,t){return m(e.slice().reverse(),t).reverse()}function d(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var g;if("function"==typeof require)try{g=require("moment")}catch(e){}if(!g&&e.moment&&(g=e.moment),!g)throw"Moment Duration Format cannot find Moment.js";g.duration.fn.format=function(){var e,t,u,v,w,M,b=[].slice.call(arguments),k=d({},this.format.defaults),j=g.duration(this);return k.duration=this,a(b,function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?o(e)&&d(k,e):k.precision=e:k.template=e}),u=k.types=i(k.types)?k.types:k.types.split(" "),"function"==typeof k.template&&(k.template=k.template.apply(k)),e=new RegExp(c(u,function(e){return k[e].source}).join("|"),"g"),v=function(e){return s(u,function(t){return k[t].test(e)})},t=c(k.template.match(e),function(e,t){var n=v(e);return{index:t,length:e.length,token:"escape"===n?e.replace(k.escape,"$1"):e,type:"escape"===n||"general"===n?null:n}},this),(w=h(u,p(l(f(t,"type"))))).length?(a(w,function(e,n){var r,i,o,u,s;r=j.as(e),i=r>0?Math.floor(r):Math.ceil(r),o=r-i,u=n+1===w.length,s=!n,a(t,function(t){t.type===e&&(d(t,{value:r,wholeValue:i,decimalValue:o,isLeast:u,isMost:s}),s&&null==k.forceLength&&t.length>1&&(k.forceLength=!0))}),j.subtract(i,e)}),k.trim&&(t=("left"===k.trim?m:y)(t,function(e){return!(e.isLeast||null!=e.type&&e.wholeValue)})),M=!1,"right"===k.trim&&t.reverse(),t=c(t,function(e){var t,i;if(!e.type)return e.token;if(t=e.isLeast&&k.precision<0?(Math.floor(e.wholeValue*Math.pow(10,k.precision))*Math.pow(10,-k.precision)).toString():e.wholeValue.toString(),t=t.replace(/^\-/,""),e.length>1&&(M||e.isMost||k.forceLength)&&(t=r(t,e.length)),e.isLeast&&k.precision>0)switch((i=e.decimalValue.toString().replace(/^\-/,"").split(/\.|e\-/)).length){case 1:t+="."+r(i[0],k.precision,!0).slice(0,k.precision);break;case 2:t+="."+r(i[1],k.precision,!0).slice(0,k.precision);break;case 3:t+="."+r(n(+i[2]-1)+(i[0]||"0")+i[1],k.precision,!0).slice(0,k.precision);break;default:throw"Moment Duration Format: unable to parse token decimal value."}return e.isMost&&e.value<0&&(t="-"+t),M=!0,t}),"right"===k.trim&&t.reverse(),t.join("")):f(t,"token").join("")},g.duration.fn.format.defaults={escape:/\[(.+?)\]/,years:/[Yy]+/,months:/M+/,weeks:/[Ww]+/,days:/[Dd]+/,hours:/[Hh]+/,minutes:/m+/,seconds:/s+/,milliseconds:/S+/,general:/.+?/,types:"escape years months weeks days hours minutes seconds milliseconds general",trim:"left",precision:0,forceLength:null,template:function(){var e=this.types,t=this.duration;switch(u(e,function(e){return t._data[e]})){case"seconds":return"h:mm:ss";case"minutes":return"d[d] h:mm";case"hours":return"d[d] h[h]";case"days":return"M[m] d[d]";case"weeks":return"y[y] w[w]";case"months":return"y[y] M[m]";case"years":return"y[y]";default:return"y[y] M[m] d[d] h:mm:ss"}}}}(this);